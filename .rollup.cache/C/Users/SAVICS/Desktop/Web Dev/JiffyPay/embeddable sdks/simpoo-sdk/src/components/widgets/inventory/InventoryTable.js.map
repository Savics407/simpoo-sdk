{"version":3,"file":"InventoryTable.js","sourceRoot":"","sources":["InventoryTable.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { createApiClient } from \"../../../api/client\";\r\nimport { Table } from \"../../molecule/Table\";\r\nimport { itemColumns, Items } from \"./item-column\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../store\";\r\nimport { useSDK } from \"../../../context/SimpooProvider\";\r\nimport placeholderImage from \"../../../assets/images/placeholder-image.svg\";\r\nimport Container from \"../../atoms/container\";\r\nimport ItemsOverview from \"./items-overview\";\r\nimport Tabs from \"../../molecule/tabs\";\r\nimport Select from \"../../atoms/simpoo-select\";\r\nimport { Skeleton } from \"../../ui/skeleton\";\r\nimport Button from \"../../atoms/button\";\r\nimport SearchComponent from \"../../atoms/search-component\";\r\nimport { icons } from \"../../../assets/icons\";\r\nimport DropdownComponent from \"../../atoms/dropdown-component\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport { useFetchData } from \"../../../api/queryHooks\";\r\nimport CreateMuiltipleItems from \"../../modals/items/create-multiple-items\";\r\n\r\nexport const InventoryTable: React.FC = () => {\r\n  const [overviewData, setOverviewData] = React.useState<any>();\r\n  const { currentPage, perview } = useSelector((state: RootState) => state.app);\r\n  const [currentTab, setCurrentTab] = useState<string>(\"all\");\r\n  const [itemFilter, setItemFilter] = useState(false);\r\n  const [searchFilter, setSearchFilter] = useState<string>(\"all\");\r\n  const [searchValue, setSearchValue] = useState<string>(\"\");\r\n  const [debouncedValue] = useDebounce(searchValue, 1000);\r\n  const { apiKey } = useSDK();\r\n\r\n  const { data: items, isFetching: loadingItems } = useFetchData(\r\n    [\r\n      \"items\",\r\n      perview.toString(),\r\n      currentPage?.toString(),\r\n      currentTab,\r\n      debouncedValue,\r\n      apiKey,\r\n    ],\r\n    debouncedValue\r\n      ? `/outbound/items/search?page=${currentPage}&paginate=${perview}&param=${debouncedValue}&for=${currentTab}&filter=all`\r\n      : `/outbound/items?page=${currentPage}&paginate=${perview}&status=${currentTab}`,\r\n    {\r\n      enabled: !!apiKey,\r\n    }\r\n  );\r\n  //  const { data: searchFilterData, isFetching: filterLoading } = useFetchData(\r\n  //    [\"searchFilter\"],\r\n  //    \"/meta/item/search_filters\",\r\n  //    {\r\n  //      enabled: !!apiKey,\r\n  //    }\r\n  //  );\r\n\r\n  const itemsData = items?.data?.[0] || [];\r\n\r\n  const tableData: Items[] =\r\n    itemsData?.data?.map((item: ItemData) => {\r\n      const getFirstImage = () => {\r\n        if (item.images?.length > 0) {\r\n          return item.images?.[0].image;\r\n        }\r\n        return placeholderImage;\r\n      };\r\n\r\n      return {\r\n        item_description: item?.name,\r\n        all_quantity: +item?.all_quantity,\r\n        quantity: +item?.quantity,\r\n        type: item?.item_type?.name,\r\n        selling_price: +item?.selling_price,\r\n        categories: item?.category || [],\r\n        tags: item?.item_tags?.map((tag) => tag.name) || [],\r\n        status: item?.status ? \"published\" : \"draft\",\r\n        sku: item?.sku,\r\n        item_image: getFirstImage(),\r\n        barcode: item?.barcode,\r\n        expired: item?.expired,\r\n        expiring: item?.expiring,\r\n        unit: item?.item_unit,\r\n        uuid: item?.uuid,\r\n        item_type_id: item?.item_type?.uuid,\r\n        reorder_level: item?.reorder_level,\r\n        fullData: item,\r\n      };\r\n    }) || [];\r\n\r\n  const { data: counts, isFetching: loadingCounts } = useFetchData(\r\n    [\"items-tab\"],\r\n    `/outbound/items/count`,\r\n    {\r\n      enabled: !!apiKey,\r\n    }\r\n  );\r\n\r\n  const tabCounts = counts?.data;\r\n\r\n  const tabsData = [\r\n    {\r\n      label: \"all\",\r\n      count: tabCounts?.all || 0,\r\n      action: () => setCurrentTab(\"all\"),\r\n    },\r\n\r\n    {\r\n      label: \"published\",\r\n      count: tabCounts?.published || 0,\r\n      action: () => setCurrentTab(\"published\"),\r\n    },\r\n    {\r\n      label: \"out of stock\",\r\n      count: tabCounts?.out_of_stock || 0,\r\n      action: () => setCurrentTab(\"out_of_stock\"),\r\n    },\r\n    {\r\n      label: \"draft\",\r\n      count: tabCounts?.draft || 0,\r\n      action: () => setCurrentTab(\"draft\"),\r\n    },\r\n    {\r\n      label: \"expiring\",\r\n      count: tabCounts?.expiring || 0,\r\n      action: () => setCurrentTab(\"expiring\"),\r\n    },\r\n    {\r\n      label: \"expired\",\r\n      count: tabCounts?.expired || 0,\r\n      action: () => setCurrentTab(\"expired\"),\r\n    },\r\n  ];\r\n\r\n  const [multipleItems, setMultipleItems] = useState(false);\r\n\r\n  return (\r\n    <Container className=\"px-4 py-6 flex flex-col gap-8\">\r\n      <Tabs tabs={tabsData} loading={loadingItems} />\r\n      <div className=\" flex items-center justify-between flex-wrap gap-4\">\r\n        <div className=\"flex items-center gap-2.5\">\r\n          {/* <Select\r\n            placeholder=\"select search key\"\r\n            value={searchFilter}\r\n            onValueChange={setSearchFilter}\r\n            showSearch={false}\r\n            options={searchFilterData?.data?.map(\r\n              (filter: { name: string; value: string }) => {\r\n                return {\r\n                  label: filter.name,\r\n                  value: filter.value,\r\n                };\r\n              }\r\n            )}\r\n            loading={loadingItems}\r\n          /> */}\r\n          <SearchComponent\r\n            placeholder={\"Search Item name, barcode or sku\"}\r\n            value={searchValue}\r\n            onChange={(e) => setSearchValue(e.target.value)}\r\n          />\r\n          {loadingItems ? (\r\n            <Skeleton className=\"w-20 h-6\" />\r\n          ) : (\r\n            <p className=\"text-dark text-sm font-medium\">\r\n              {itemsData?.meta?.total ?? 0}{\" \"}\r\n              <span className=\"text-gray-700\">Items</span>\r\n            </p>\r\n          )}\r\n        </div>\r\n        <div className=\"flex gap-4\">\r\n          {/* <Button\r\n            label=\"Filter\"\r\n            left_addon={React.cloneElement(icons.filter_edit, {\r\n              fill: \"#5E6278\",\r\n            } as any)}\r\n            onClick={() => setItemFilter(true)}\r\n            className=\"!font-medium !bg-gray-200 hover:!bg-gray-300 !text-gray-700 !text-sm !h-12\"\r\n          /> */}\r\n\r\n          <Button\r\n            label=\"Create New\"\r\n            left_addon={icons.plus_squared}\r\n            className=\"!font-medium !text-sm !h-12\"\r\n            onClick={() => setMultipleItems(true)}\r\n          />\r\n        </div>\r\n      </div>\r\n      <ItemsOverview\r\n        loading={loadingItems}\r\n        data={items?.data?.[1]}\r\n        meta={itemsData?.meta}\r\n      />\r\n      <Table\r\n        loading={loadingItems}\r\n        columns={itemColumns}\r\n        data={tableData}\r\n        emptyData={tableData.length === 0}\r\n        emptyProps={{\r\n          header: \"No item yet\",\r\n          subText: \"Add new item to start managing your inventory.\",\r\n        }}\r\n        tHeadClass=\"whitespace-nowrap\"\r\n        tbCellClass=\"text-dark font-semibold\"\r\n        meta={itemsData?.meta}\r\n        // actions={actions}\r\n        // moreOptions={bulkActions}\r\n      />\r\n      {multipleItems ? (\r\n        <CreateMuiltipleItems\r\n          isOpen={multipleItems}\r\n          onClose={() => setMultipleItems(false)}\r\n        />\r\n      ) : null}\r\n    </Container>\r\n  );\r\n};\r\n"]}